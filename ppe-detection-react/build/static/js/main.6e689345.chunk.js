(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(11),o=a.n(i),r=(a(62),a(16)),c=a(17),l=a(19),d=a(18),m=a(20),u=a(54),h=a(2),f=a(117),p=a(118),v=a(43),b=a.n(v),E=a(31),y=a.n(E),g=a(28),w=a.n(g),k=a(49),N=a.n(k),x=a(44),S=a.n(x),O=a(45),j=a.n(O),P=a(46),T=a.n(P),q=(a(67),a(69),a(71),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={cards:[{question:"How do we use the project?",answer:s.a.createElement("div",null,'To start the project, you can either click on the "Start Detection" button at the top of the page, or the play button on the bottom right section of the screen. ',s.a.createElement("br",null),s.a.createElement("br",null),"Once you're in the program, please make sure to allow camera access to the browser. Test it out by wearing a hard-hat and a high-vis vest and let it start!")},{question:"Which PPE is being detected by the model?",answer:"We have trained our model to only detect hard-hats and high-vis vests for now. However, you can easily substitute your own machine-learning model if you wish to identify more items!"},{question:"What technology was used for this project?",answer:"Our model is first trained with Tensorflow. It is then converted into a Tensorflow.JS format and hosted on a website created using React. "},{question:"What can we do if we'd like to modify the code for our use?",answer:s.a.createElement("div",null,"You can obtain the ",s.a.createElement("a",{href:"https://github.com/candicerimba/ppe-detection-react"},"source code")," and run it on your local machine.")}]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){b.a.init({duration:800,easing:"ease-in-out"})}},{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement("a",{href:"/detection",className:"detection-button","data-aos":"fade-up"},s.a.createElement(w.a,{className:"home-play-button"})),s.a.createElement("div",{className:"header-bar"},s.a.createElement("div",{className:"header-text","data-aos":"fade-up"},s.a.createElement("div",{className:"header-title"},"Show Me Your PPE"),s.a.createElement("div",{className:"header-subtitle"},"Improving workplace safety through machine learning"),s.a.createElement("div",{className:"start-btn-bar"},s.a.createElement("a",{className:"start-btn",href:"/detection"},"Start Detection"))),s.a.createElement("img",{src:S.a,className:"header-image","data-aos":"fade-left"})),s.a.createElement("div",{className:"info-bar","data-aos":"fade-right"},s.a.createElement("img",{src:T.a,className:"data-image left"}),s.a.createElement("div",{className:"info-text left"},s.a.createElement("div",{className:"info-title"},"A Dangerous Problem"),s.a.createElement("div",{className:"info-description"},"In the manufacturing industry, casualties and accidents happen in workplaces every year.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("i",null,"Personal Protective Equipment (PPE)")," like a helmet (hard-hat), safety-harness, and goggles play a very important role in ensuring the safety of workers. These equipment are critical to protect people from casualties and accidents.",s.a.createElement("br",null),s.a.createElement("br",null),"However, due to the negligence of the workers and their supervisors, workplace accidents occuring from a lack of proper equipment still occur. Supervisors often don't monitor workplace safety consistently because such tasks can be seen as cumbersome."))),s.a.createElement("div",{className:"info-bar","data-aos":"fade-left"},s.a.createElement("img",{src:j.a,id:"collaboration-pic",className:"data-image right"}),s.a.createElement("div",{className:"info-text right"},s.a.createElement("div",{className:"info-title"},"Our Project"),s.a.createElement("div",{className:"info-description"},"To combat this problem, we created a system backed by a trained machine learning model to automatically detect the use of correct PPE.",s.a.createElement("br",null),s.a.createElement("br",null),"This project aims to ensure that workers are wearing proper PPE before they enter the workplace. It can assist supervisors to monitor workers effectively by providing them with real-time alerts, without the need to be on-site all the time.",s.a.createElement("br",null),s.a.createElement("br",null),"By developing this project, we hope that this eases the supervisors' burden of constant workplace monitoring, and allow them to focus on other aspects of workplace safety."))),s.a.createElement("div",{className:"frequently-asked"},s.a.createElement("div",{className:"frequently-asked-title","data-aos":"fade-up"},"Frequently Asked Questions"),s.a.createElement("div",{className:"frequently-asked-description","data-aos":"fade-up"},"You can know more about our project through this list of FAQs."),s.a.createElement(f.a,{defaultActiveKey:"0"},this.state.cards.map(function(e,t){return s.a.createElement(p.a,{key:t,className:"frequently-asked-container","data-aos":"fade-up","data-aos-delay":100*(t+1)},s.a.createElement(f.a.Toggle,{as:p.a,variant:"link",eventKey:t,className:"frequently-asked-header"},s.a.createElement("div",{className:"q-icon-container left"},s.a.createElement(y.a,{className:"q-icon"})),s.a.createElement("div",{className:"question-text left"},e.question),s.a.createElement("div",{className:"q-icon-container right"},s.a.createElement(N.a,{className:"q-icon"}))),s.a.createElement(f.a.Collapse,{eventKey:t},s.a.createElement(p.a.Body,{className:"frequently-asked-answer"},e.answer)))}))))}}]),t}(s.a.Component)),C=a(37),R=a.n(C),B=a(50),D=a(15),M=a(51),I=a.n(M),A=a(32),F=a(53),W=a.n(F),H=a(33),_=a(52),G=a.n(_),J=(a(82),a(83),a(85),a(101)),K=[{item:"helmet",color:"#F8962B",helmet:!0},{item:"no helmet",color:"#FE0000",helmet:!1},{item:"vest",color:"#22EE5B",vest:!0},{item:"no vest",color:"#51C1B1",vest:!1}],L=.8*window.innerHeight;H.b.configure();var Y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).videoRef=s.a.createRef(),a.canvasRef=s.a.createRef(),a.state={model:null,run:!1,width:640,height:480,webcamStart:!1,helmetExistence:!1,vestExistence:!1,hasDetected:!1,help:!1},a.stopModel=a.stopModel.bind(Object(D.a)(Object(D.a)(a))),a.startModel=a.startModel.bind(Object(D.a)(Object(D.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(function(t){window.stream=t;var a=L/t.getTracks()[0].getSettings().height;return e.setState({width:t.getTracks()[0].getSettings().width*a,height:t.getTracks()[0].getSettings().height*a}),e.videoRef.current.srcObject=t,new Promise(function(t,a){e.videoRef.current.onloadedmetadata=function(){t()}})}),a=J.loadGraphModel("http://192.168.0.172/model.json",{credentials:"include",mode:"no-cors"}).then(function(t){e.setState({model:t,run:!0})});Promise.all([a,t]).then(function(t){e.detectObjects()}).catch(function(e){console.error(e)})}}},{key:"stopModel",value:function(){this.setState({run:!1});var e=document.getElementById("stop-btn"),t=document.getElementById("start-btn");e&&(e.style.display="none"),t&&(t.style.display="inline-block")}},{key:"startModel",value:function(){this.setState({run:!0});var e=document.getElementById("stop-btn"),t=document.getElementById("start-btn");e&&(e.style.display="inline-block"),t&&(t.style.display="none")}},{key:"detectObjects",value:function(){var e=Object(B.a)(R.a.mark(function e(){var t,a,n,s,i,o=this;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.state.model){e.next=2;break}return e.abrupt("return");case 2:if(!this.state.run){e.next=15;break}return t=J.browser.fromPixels(this.videoRef.current),a=J.image.resizeBilinear(t,[300,300]),n=J.cast(a,"float32"),s=J.tensor4d(Array.from(n.dataSync()),[1,300,300,3],"int32"),e.next=9,this.state.model.executeAsync({image_tensor:s},["detection_boxes","num_detections","detection_classes","detection_scores"]);case 9:i=e.sent,this.renderPredictions(i[0].dataSync(),i[1].dataSync(),i[2].dataSync(),i[3].dataSync()),t.dispose(),a.dispose(),n.dispose(),s.dispose();case 15:requestAnimationFrame(function(){o.detectObjects()});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toast",value:function(e,t){var a=this,n={closeOnClick:!1,closeButton:!1,pauseOnFocusLoss:!1,pauseOnHover:!1,onOpen:function(){a.audioRight.play(),setTimeout(function(){a.audioRight.pause(),a.setState({hasDetected:!1,vestExistence:!1,helmetExistence:!1})},5e3)}};!0!==this.state.helmetExistence||!0!==this.state.vestExistence||this.state.hasDetected||(this.setState({hasDetected:!0}),H.b.success(function(a){a.closeToast;return s.a.createElement("div",{style:{paddingLeft:"10%"}},s.a.createElement("b",null,e),s.a.createElement("br",null),t)},n))}},{key:"renderPredictions",value:function(e,t,a,n){var s=this,i=this.canvasRef.current.getContext("2d");if(i.clearRect(0,0,i.canvas.width,i.canvas.height),this.state.webcamStart||this.setState({webcamStart:!0}),!1!==this.state.run){for(var o=!1,r=!1,c=0;c<t[0];c++){var l=e[4*c]*this.state.height,d=e[4*c+1]*this.state.width,m=e[4*c+2]*this.state.height,u=e[4*c+3]*this.state.width,h=100*n[3*c],f=K[a[c]-1],p=h.toFixed(1)+" - "+f.item;if(h>30){f.hasOwnProperty("helmet")&&f.helmet&&(r=!0),f.hasOwnProperty("vest")&&f.vest&&(o=!0);var v=f.color;this.drawBox(d,l,u,m,v,p)}}r&&(this.setState({helmetExistence:!0}),setTimeout(function(){return s.setState({helmetExistence:!1})},4e3)),o&&(this.setState({vestExistence:!0}),setTimeout(function(){return s.setState({vestExistence:!1})},4e3)),!0===this.state.helmetExistence&&!0===this.state.vestExistence&&this.toast("ACCESS GRANTED!","Welcome in!")}}},{key:"drawBox",value:function(e,t,a,n,s,i){var o=this.canvasRef.current.getContext("2d");o.beginPath(),o.rect(e,t,a-e,n-t),o.lineWidth=4,o.strokeStyle=s,o.stroke(),o.textBaseline="top",o.font="16px sans-serif",o.fillStyle=s;var r=o.measureText(i).width,c=parseInt(o.font,10);o.fillRect(e,t,r+4,c+4),o.shadowColor="white",o.fillStyle="white",o.fillText(i,e,t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("audio",{loop:!0,ref:function(t){return e.audioRight=t}},s.a.createElement("source",{src:"https://freesound.org/data/previews/131/131660_2398403-lq.mp3",type:"audio/mpeg"})),s.a.createElement("header",null),s.a.createElement(H.a,null),s.a.createElement("div",{className:"video"},s.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,className:"vid-and-canvas",ref:this.videoRef,width:this.state.width,height:this.state.height}),s.a.createElement("canvas",{className:"vid-and-canvas",ref:this.canvasRef,width:this.state.width,height:this.state.height})),s.a.createElement("div",{id:"main-button-bar"},s.a.createElement(I.a,{className:"loader",loaded:this.state.webcamStart&&this.state.model,options:{color:this.state.model?"white":"black"}},s.a.createElement("div",{className:"main-btn-container"},s.a.createElement(W.a,{id:"stop-btn",className:"main-btn",onClick:this.stopModel,"data-tip":!0,"data-for":"stop"}),s.a.createElement(w.a,{style:{display:"none"},id:"start-btn",className:"main-btn",onClick:this.startModel,"data-tip":!0,"data-for":"start"})),s.a.createElement(A.a,{id:"start",place:"top",type:"light",effect:"float"},s.a.createElement("span",null,"Click on this button to start detection.")),s.a.createElement(A.a,{id:"stop",place:"top",type:"light",effect:"float"},s.a.createElement("span",null,"Click on this button to stop detection."))),s.a.createElement("div",{className:"main-btn-container"},s.a.createElement(y.a,{id:"help-btn",className:"main-btn","data-tip":!0,"data-for":"help",onClick:function(){e.setState({help:!0})}})),s.a.createElement(A.a,{id:"help",place:"top",type:"light",effect:"float"},s.a.createElement("span",null,"Click on this button if you need any help.")),s.a.createElement(G.a,{id:"alert-container",show:this.state.help,title:"Support",confirmButtonColor:"#BECF41",html:"<b>If the system is not running properly,<br />make sure to give the application access to your camera, and allow up to a minute to let the application load.<br/><br/>To test the application, have someone wearing a hard-hat and a vest appear on your camera and watch the model work!<br/><br/>The Pause/Play button can be used to stop/start detection.</b>",onConfirm:function(){return e.setState({help:!1})}})))}}]),t}(s.a.Component),Q=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.title="PPE DETECTION AND ALERTING"}},{key:"render",value:function(){return s.a.createElement(u.a,null,s.a.createElement(h.c,null,s.a.createElement(h.a,{path:"/detection",exact:!0,component:q}),s.a.createElement(h.a,{path:"/",exact:!0,component:Y})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(Q,null),document.getElementById("root")),console.log("Hiiiiiiiiiiiii"),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})},44:function(e,t,a){e.exports=a.p+"static/media/construction.9ca91ca4.png"},45:function(e,t,a){e.exports=a.p+"static/media/collaboration.2be78913.svg"},46:function(e,t,a){e.exports=a.p+"static/media/logistics.b3a8def3.svg"},57:function(e,t,a){e.exports=a(100)},62:function(e,t,a){},71:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/ppe.3c986c87.png"},85:function(e,t,a){},92:function(e,t){},93:function(e,t){},94:function(e,t){},95:function(e,t){},96:function(e,t){},97:function(e,t){}},[[57,2,1]]]);
//# sourceMappingURL=main.6e689345.chunk.js.map